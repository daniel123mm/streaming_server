(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{20:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n(1),s=n.n(i),r=n(22),c=n.n(r),o=n(25),l=n(2),u=(n(31),n(32),n(23)),h=n(4),d=n.n(h),j=n(8),b=n(5),p=n(10),m=n(12),v=n(11),O=function(){var e=Object(j.a)(d.a.mark((function e(t,n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,n).then((function(e){if(e.ok)return e.json();throw{success:e.ok}})).then((function(e){return a=e})).catch((function(e){return a=e}));case 2:return e.abrupt("return",a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),g=function e(){Object(b.a)(this,e),this.basePath="/api/user",this.login="/login",this.logout="/logout",this.isLogin="/isLogin",this.newAccount="/newAccount"},x=function e(){Object(b.a)(this,e),this.basePath="/api/video",this.getVideoList="/getVideoList"},w=function e(){var t=this;Object(b.a)(this,e),this.api=void 0,this.getVideoList=Object(j.a)(d.a.mark((function e(){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.api.basePath+t.api.getVideoList,e.next=3,O(n);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)}))),this.api=new x},f=function(e){var t=e.video,n="/streaming?"+t.dash;return Object(a.jsx)("a",{href:n,children:Object(a.jsx)("div",{className:"w3-col l3 m6 w3-margin-bottom",children:Object(a.jsxs)("div",{className:"w3-display-container",children:[Object(a.jsx)("div",{className:"w3-display-topleft w3-black w3-padding",children:t.name}),Object(a.jsx)("img",{src:t.coverImage,alt:"House",style:{width:"100%"}})]})})})},y=function(e){Object(m.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).videoService=void 0,a.getVideoList=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.videoService.getVideoList();case 2:t=e.sent,a.setState({videoList:t});case 4:case"end":return e.stop()}}),e)}))),a.state={videoList:[]},a.videoService=new w,a}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.getVideoList()}},{key:"render",value:function(){var e=this,t=this.state.videoList.map((function(t){return Object(a.jsx)(f,{video:t},e.state.videoList.indexOf(t))}));return Object(a.jsxs)("div",{className:"home",children:[Object(a.jsx)("header",{className:"w3-display-container w3-content w3-wide",style:{maxWidth:"1000px"},id:"home",children:Object(a.jsx)("img",{className:"w3-image",src:"images/title.jpg",alt:"Architecture",width:"1200",height:"600"})}),Object(a.jsxs)("div",{className:"w3-content w3-padding",style:{maxWidth:"1564px"},children:[Object(a.jsx)("div",{className:"w3-container w3-padding-32",id:"Videos",children:Object(a.jsx)("h3",{className:"w3-border-bottom w3-border-light-grey w3-padding-16",children:"\u6700\u65b0\u5f71\u7247"})}),Object(a.jsx)("div",{className:"w3-row-padding",children:t})]})]})}}]),n}(s.a.Component),C=n(15),k=(n(20),function e(){var t=this;Object(b.a)(this,e),this.api=void 0,this.login=function(e){var n=t.api.basePath+t.api.login,a={method:"POST",body:JSON.stringify(e),headers:new Headers({"Content-Type":"application/json"})};return O(n,a)},this.logout=function(){var e=t.api.basePath+t.api.logout;return O(e)},this.isLogin=function(){var e=t.api.basePath+t.api.isLogin;return O(e)},this.newAccount=function(e){var n=t.api.basePath+t.api.newAccount,a={method:"POST",body:JSON.stringify(e),headers:new Headers({"Content-Type":"application/json"})};return O(n,a)},this.api=new g}),S=[{path:"/",component:y,exact:!0},{path:"/register",component:function(e){Object(m.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).userService=void 0,a.handleChange=function(e){e.preventDefault(),a.setState(Object(C.a)({},e.target.name,e.target.value))},a.submitInfo=Object(j.a)(d.a.mark((function e(){var t,n,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i in t=a.state,n=0,t)""===t[i]&&"status"!==i&&(n=1);a.state.password!==a.state.pswRepeat&&(n=2),e.t0=n,e.next=1===e.t0?7:2===e.t0?9:11;break;case 7:return a.setState({status:"\u60a8\u6709\u6b04\u4f4d\u672a\u586b!"}),e.abrupt("break",16);case 9:return a.setState({status:"\u5bc6\u78bc\u8207\u518d\u6b21\u78ba\u4efb\u5bc6\u78bc\u4e0d\u540c!"}),e.abrupt("break",16);case 11:return e.next=13,a.userService.newAccount(t);case 13:return e.sent.success?window.location.href="/login":a.setState({status:"\u6b64\u5e33\u865f\u5df2\u7d93\u5b58\u5728!"}),e.abrupt("break",16);case 16:case"end":return e.stop()}}),e)}))),a.userService=new k,a.state={account:"",password:"",pswRepeat:"",name:"",email:"",status:""},a}return Object(p.a)(n,[{key:"render",value:function(){return Object(a.jsxs)("div",{className:"container",children:[Object(a.jsxs)("div",{className:"formContainer",children:[Object(a.jsxs)("h1",{children:["\u8a3b\u518a\u6210\u70ba",Object(a.jsx)("b",{children:"You"}),"Tobe\u6703\u54e1"]}),Object(a.jsx)("hr",{}),Object(a.jsx)("label",{htmlFor:"account",children:Object(a.jsx)("b",{children:"\u5e33\u865f"})}),Object(a.jsx)("input",{type:"text",placeholder:"\u5e33\u865f",name:"account",value:this.state.account,onChange:this.handleChange,required:!0}),Object(a.jsx)("label",{htmlFor:"psw",children:Object(a.jsx)("b",{children:"\u5bc6\u78bc"})}),Object(a.jsx)("input",{type:"password",placeholder:"\u5bc6\u78bc",name:"password",value:this.state.password,onChange:this.handleChange,required:!0}),Object(a.jsx)("label",{htmlFor:"psw-repeat",children:Object(a.jsx)("b",{children:"\u78ba\u8a8d\u5bc6\u78bc"})}),Object(a.jsx)("input",{type:"password",placeholder:"\u518d\u6b21\u8f38\u5165\u5bc6\u78bc",name:"pswRepeat",value:this.state.pswRepeat,onChange:this.handleChange,required:!0}),Object(a.jsx)("label",{htmlFor:"name",children:Object(a.jsx)("b",{children:"\u4f7f\u7528\u8005\u540d\u7a31"})}),Object(a.jsx)("input",{type:"text",placeholder:"\u540d\u5b57",name:"name",value:this.state.name,onChange:this.handleChange,required:!0}),Object(a.jsx)("label",{htmlFor:"email",children:Object(a.jsx)("b",{children:"Email"})}),Object(a.jsx)("input",{type:"text",placeholder:"Email",name:"email",value:this.state.email,onChange:this.handleChange,required:!0}),Object(a.jsx)("label",{style:{color:"red"},children:this.state.status}),Object(a.jsx)("hr",{}),Object(a.jsx)("button",{onClick:this.submitInfo,className:"registerbtn",children:"\u8a3b\u518a"})]}),Object(a.jsx)("div",{className:"signin",children:Object(a.jsxs)("p",{children:["\u5df2\u7d93\u662f\u6703\u54e1? ",Object(a.jsx)("a",{href:"/login",children:"\u767b\u5165"}),"."]})})]})}}]),n}(s.a.Component),exact:!0},{path:"/login",component:function(e){Object(m.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).userService=void 0,a.handleChange=function(e){e.preventDefault(),a.setState(Object(C.a)({},e.target.name,e.target.value))},a.submitInfo=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state,e.next=3,a.userService.login(t);case 3:e.sent.success?window.location.href="/":a.setState({uname:"\u5e33\u865f\u6216\u5bc6\u78bc\u932f\u8aa4!"});case 5:case"end":return e.stop()}}),e)}))),a.userService=new k,a.state={account:"",password:"",uname:""},a}return Object(p.a)(n,[{key:"render",value:function(){return Object(a.jsxs)("div",{className:"loginContainer",children:[Object(a.jsxs)("div",{className:"loginFormContainer",children:[Object(a.jsx)("hr",{}),Object(a.jsx)("label",{htmlFor:"account",children:Object(a.jsx)("b",{children:"\u5e33\u865f"})}),Object(a.jsx)("input",{type:"text",placeholder:"\u5e33\u865f",name:"account",value:this.state.account,onChange:this.handleChange,required:!0}),Object(a.jsx)("label",{htmlFor:"psw",children:Object(a.jsx)("b",{children:"\u5bc6\u78bc"})}),Object(a.jsx)("input",{type:"password",placeholder:"\u5bc6\u78bc",name:"password",value:this.state.password,onChange:this.handleChange,required:!0}),Object(a.jsx)("label",{style:{color:"red"},children:this.state.uname}),Object(a.jsx)("hr",{}),Object(a.jsx)("button",{className:"registerbtn",onClick:this.submitInfo,children:"\u767b\u5165"})]}),Object(a.jsx)("div",{className:"signin",children:Object(a.jsxs)("p",{children:["\u9084\u6c92\u52a0\u5165\u6703\u54e1? ",Object(a.jsx)("a",{href:"/register",children:"\u5feb\u53bb\u8a3b\u518a"}),"."]})})]})}}]),n}(s.a.Component),exact:!0},{path:"/streaming",component:function(e){Object(m.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).player=void 0,a.videoPlayer=void 0,a.player=s.a.createRef(),a.videoPlayer=void 0,a}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.player.current;this.videoPlayer=videojs(t),this.videoPlayer.controlBar.addChild("QualitySelector"),this.videoPlayer.ready((function(){e.videoPlayer.src([{src:"/dash/big_1080/big.mpd",type:"application/dash+xml",label:"1080P"},{src:"/dash/big_720/big.mpd",type:"application/dash+xml",label:"720P"},{src:"/dash/big_480/big.mpd",type:"application/dash+xml",label:"480P",selected:"true"},{src:"/dash/big_360/big.mpd",type:"application/dash+xml",label:"360P"}]),e.videoPlayer.play()}))}},{key:"componentWillUnmount",value:function(){this.videoPlayer&&this.videoPlayer.dispose()}},{key:"render",value:function(){return Object(a.jsx)("div",{className:"w3-main w3-content w3-padding",style:{maxWidth:"1200px",marginTop:"100px"},children:Object(a.jsx)("video",{className:"video-js vjs-default-skin vjs-16-9 vjs-big-play-centered",controls:!0,autoPlay:!0,muted:!0,ref:this.player})})}}]),n}(s.a.Component)}],N=function(e){var t=e.props;return Object(a.jsx)("div",{className:"w3-bar-item w3-right",children:Object(a.jsx)("button",{onClick:t.onClick,children:"\u767b\u51fa"})})},P=function(e){var t=e.props;return Object(a.jsx)("div",{className:"w3-bar-item w3-right",children:Object(a.jsx)("button",{onClick:t.onClick,children:"\u767b\u5165"})})},L=function(e){var t=e.props;return Object(a.jsx)("div",{className:"w3-bar-item w3-right",children:Object(a.jsx)("button",{onClick:t.onClick,children:"\u8a3b\u518a"})})},F=function(e){Object(m.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e))._userService=void 0,a.home=function(){window.location.href="/"},a.register=function(){window.location.href="/register"},a.login=function(){window.location.href="/login"},a.logout=function(){a._userService.logout(),window.location.href="/"},a.isLogin=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a._userService.isLogin();case 2:t=e.sent,a.setState({userStatus:t});case 4:case"end":return e.stop()}}),e)}))),a._userService=new k,a.state={userStatus:{message:"",success:!1,name:""}},a}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.isLogin()}},{key:"render",value:function(){var e=this;return Object(a.jsx)("div",{className:"w3-top",children:Object(a.jsxs)("div",{className:"w3-bar w3-white w3-wide w3-padding w3-card",children:[Object(a.jsxs)("div",{className:"w3-bar-item w3-button",onClick:this.home,children:[Object(a.jsx)("img",{src:"/images/logo.png",width:"30",height:"20",alt:"no pic",style:{width:"auto"}}),Object(a.jsx)("b",{children:"You"}),"Tobe"]}),function(){if(e.state.userStatus.success){var t={onClick:e.logout};return Object(a.jsx)(N,{props:t})}var n={onClick:e.login},i={onClick:e.register};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(P,{props:n}),Object(a.jsx)(L,{props:i})]})}(),Object(a.jsx)("div",{className:"w3-bar-item w3-right",children:Object(a.jsx)("label",{htmlFor:"user",children:this.state.userStatus.name})})]})})}}]),n}(s.a.Component);var T=function(){return Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)(F,{}),Object(u.a)(S)]})},V=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,40)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),a(e),i(e),s(e),r(e)}))};c.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(o.a,{children:Object(a.jsx)(l.c,{children:Object(a.jsx)(T,{})})})}),document.getElementById("root")),V()}},[[39,1,2]]]);
//# sourceMappingURL=main.4f435e8b.chunk.js.map